<%- layout("/layouts/boilerplate") %> 
<body>

   <style>
     /* #filters{
        display: flex;
        flex-wrap: wrap;
     }

     .filter{
        text-align: center;
        margin-right: 2rem;
        margin-top: 2rem;
        opacity: 0.7;
     }

     .filter:hover{
        opacity: 1;
        cursor: pointer;
     }

     .filter p{
        font-size: 0.8rem;
     }

     .navbar-nav li{
       margin-right: 60px;
     }

     .navbar{
        background-color: white !important;
     } */

     .airbnb-filter-bar {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap; /* Prevent wrapping to a new line */
    overflow-x: auto; /* Enable horizontal scrolling */
    padding: 10px 0; /* Add some vertical padding */
    /* Optional: Hide the scrollbar */
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
}

.airbnb-filter-bar::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

.filter-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 6px 8px; /* Slightly smaller padding */
    margin-right: 8px; /* Slightly smaller margin */
    border: none; /* Remove the border */
    border-radius: 8px;
    background-color: transparent; /* Make the background transparent */
    color: #222;
    font-size: 0.8em; /* Smaller font size for the tag */
    white-space: nowrap; /* Prevent text from wrapping */
    cursor: pointer;
    opacity: 0.8; /* Initial opacity */
    transition: opacity 0.2s ease-in-out;
    margin-right: 3.00rem;
}

.filter-option:hover {
    opacity: 1; /* Opacity on hover */
}

.filter-option.active {
    opacity: 1; /* Active state should also be fully opaque */
    /* You can add other active state styles here if needed, e.g., color change */
}

.filter-option i {
    font-size: 1em; /* Smaller icon size */
    margin-bottom: 3px; /* Smaller margin below the icon */
}

.filter-option span {
    text-align: center;
}

/* Ensure the container doesn't take up too much vertical space */
.airbnb-filter-bar {
    margin-bottom: 20px; /* Add some space below the bar */
}

.toggle{
    display: flex;
    flex-direction: row;        
}

.responsive-toggle {
        /* Default style: Hidden on smaller screens */
        display: none;
    }

    /* Show on medium screens (768px and wider) */
    @media (min-width: 992px) {
        .responsive-toggle {
            display: flex; /* Or your desired display property, like block or inline-flex */
            align-items: center; /* If you want to align items vertically within */
        }
    }

    /* Optional: You can add styles for larger screens specifically if needed */
    @media (min-width: 992px) {
        .responsive-toggle {
            /* Further adjustments for larger screens */
        }
    }

    .tax-info{
        display: none;
    }

    .tax-toggle{
        border: 1px solid lightgrey;
        border-radius: 1rem;
        height: 3.5rem;
        padding: 1rem;
        width: 30%;
        margin-left: 20px;
    }

    .row{
        margin: 0 !important;
    }
    
   </style>
    
    <div class="toggle">
    <div class="airbnb-filter-bar">
    <button class="filter-option ">
        <i class="fa-solid fa-fire"></i>
        <span>Trending</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-bed"></i>
        <span>Rooms</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-mountain-city"></i>
        <span>Iconic Cities</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-mountain-sun"></i>
        <span>Mountains</span>
    </button>
    <button class="filter-option">
        <i class="fa-brands fa-fort-awesome"></i>
        <span>Castles</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-person-swimming"></i>
        <span>Amazing Pools</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-campground"></i>
        <span>Camping</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-cow"></i>
        <span>Farms</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-snowflake"></i>
        <span>Arctic</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-tree"></i>
        <span>Treehouses</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-landmark-dome"></i></i>
        <span>Dome</span>
    </button>
    <button class="filter-option">
        <i class="fa-solid fa-ship"></i>
        <span>Boats</span>
    </button>
    </div>
    
    <div class="tax-toggle responsive-toggle">
        <div class="form-check-reverse form-switch ">
            <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
            <label class="form-check-label" for="switchCheckDefault">Display total after taxes</label>
          </div>           
    </div>
</div>

    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3 mx-0">
        <!-- Display all listings in a responsive grid -->
        <% for (let listing of allListings) { %>
            <a href="/listings/<%= listing._id %>" class="listing-link">
                <div class="card col listing-card">
                    <img src="<%= listing.image.url || 'https://plus.unsplash.com/premium_photo-1664121799972-98e5aa03d31b?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' %>" 
                         class="card-img-top" 
                         style="height: 20rem" 
                         alt="listing_image">
                    
                    <!-- Card overlay for additional content -->
                    <div class="card-img-overlay"></div>

                    <div class="card-body">
                        <p class="card-text">
                            <b><%= listing.title %></b><br>
                            <%= listing.price.toLocaleString("en-IN") %> / night
                            <i class="tax-info">&nbsp; &nbsp; +18% GST</i>
                        </p>
                    </div>
                </div>
            </a>
        <% } %>
    </div>
</body>

<script>
    let taxSwitch = document.getElementById("switchCheckDefault")
    taxSwitch.addEventListener("click",()=>{
        let taxInfo = document.getElementsByClassName("tax-info");
        for(info of taxInfo){
            if(info.style.display != "inline"){
                info.style.display = "inline";
            }else{
                info.style.display = "none";
            }

        }
    })
</script>

<!-- Explanation of HTML Structure Adjustments by the Browser -->
<!-- 
    In some cases, browsers may automatically correct or adjust HTML structures. 
    If an element (like <ul>) is placed outside <body>, the browser may move it inside <body> 
    when rendering the page. This happens due to:

    1. **HTML Correction by the Browser**: Browsers ensure valid HTML structure.
    2. **Final DOM Output**: The actual DOM structure may differ from the written HTML.

    So, if you see unexpected changes in the HTML when inspecting, it's likely due to these adjustments.
-->
